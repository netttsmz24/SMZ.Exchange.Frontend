import{a as L}from"./chunk-GWIFTDD7.js";import{a as M,b as l,c as w,d as P,e as _,f as d,g as I,h as A,i as k,j as B,k as V,l as Y,m as v,n as G,o as U}from"./chunk-SMFXKUX3.js";import{a as q,b as j}from"./chunk-4YRQEABX.js";import"./chunk-SEQLKZJW.js";import"./chunk-TO4YPB6M.js";import"./chunk-HW6X36MZ.js";import{j as D}from"./chunk-FHA5RL3B.js";import{Ab as O,Ea as g,Eb as b,Fa as R,Ia as T,P as E,Pa as c,Ra as e,Sa as t,Ta as m,Va as f,Z as S,ab as i,cb as F,fa as N,va as s,za as y}from"./chunk-7FFTT4OB.js";function J(o,n){if(o&1&&(e(0,"option",6),i(1),t()),o&2){let a=n.$implicit;c("value",a.currencyCode),s(),F(" ",a.countryName,"")}}var W="USD",Q=100,H=(a=>(a[a.Buy=1]="Buy",a[a.Sell=2]="Sell",a))(H||{}),h=class o{exchangeRates=[];currencyList=[];exchangeData=new N;formSub;TransactionType=H;hasSubmitted=!1;transactionForm=new _({transactionType:new d(1,[l.required]),currencyCode:new d(W,[l.required]),code:new d({value:W,disabled:!0}),rate:new d({value:0,disabled:!0},[l.required,l.min(1e-8)]),amount:new d(Q,[l.required,l.min(.01)]),totalAmount:new d({value:0,disabled:!0},[l.required,l.min(.01)])});constructor(){}ngOnInit(){this.formSub=this.transactionForm.valueChanges.subscribe(()=>{this.onCurrencyConverter()})}ngOnDestroy(){this.formSub.unsubscribe()}ngOnChanges(n){(n.exchangeRates||n.currencyList)&&this.onCurrencyConverter()}onSubmit(){if(this.hasSubmitted=!0,this.transactionForm.invalid)return;let n=this.transactionForm.getRawValue();this.exchangeData.emit(n)}onCurrencyConverter(){let n=this.transactionForm.get("currencyCode")?.value,a=this.transactionForm.get("transactionType")?.value,r=this.transactionForm.get("amount")?.value,p=this.exchangeRates.find(x=>x.currencyCode===n),u=Number(a)===1?p?.buyRate:p?.sellRate;if(p&&u&&u>0){let x=p.units||1,X=r/x*u;this.transactionForm.get("rate")?.setValue(u,{emitEvent:!1}),this.transactionForm.get("totalAmount")?.setValue(X,{emitEvent:!1})}else this.transactionForm.get("rate")?.setValue(0,{emitEvent:!1}),this.transactionForm.get("totalAmount")?.setValue(0,{emitEvent:!1}),console.warn("No matching rate found for",n,"with transaction type",a);this.transactionForm.get("code")?.setValue(n,{emitEvent:!1})}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=g({type:o,selectors:[["app-exchange-panel"]],inputs:{exchangeRates:[0,"ExchangeRates","exchangeRates"],currencyList:[0,"CurrencyList","currencyList"]},outputs:{exchangeData:"exchangeData"},features:[S],decls:52,vars:4,consts:[[1,"row"],[1,"col-sm-12","transaction-box",3,"submit","formGroup"],[1,"col-lg-6","col-md-12"],[1,"col-md-4","step1"],[1,"row","s1-lab-box","mb-0"],["aria-label","form-select-lg example","formControlName","transactionType",1,"form-select","form-select","mb-2"],[3,"value"],[1,"col-md-4","step2"],["aria-label","form-select-lg example","formControlName","currencyCode",1,"form-select","form-select","mb-2"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","step3"],["type","text","formControlName","code",1,"form-control","mb-2"],[1,"col-md-4","step4"],["type","text","placeholder","","formControlName","rate",1,"form-control","mb-2"],[1,"col-md-4","step5"],[1,"row","s1-lab-box","color-yellow","mb-0"],["type","text","placeholder","","formControlName","amount",1,"form-control","mb-2"],[1,"col-md-4","step6"],["type","text","placeholder","","formControlName","totalAmount",1,"form-control","color-yellow"],[1,"col-md-12"],["type","submit",1,"btn","next-btn","col-md-4","col-xs-12"]],template:function(a,r){a&1&&(e(0,"div",0)(1,"form",1),f("submit",function(){return r.onSubmit()}),e(2,"div",0)(3,"div",2)(4,"div",0)(5,"div",3)(6,"div",4)(7,"label"),i(8," TRANSACTION TYPE "),t()(),e(9,"div",0)(10,"select",5)(11,"option",6),i(12,"We BUY ( YOU SELL)"),t(),e(13,"option",6),i(14,"We SELL ( YOU BUY)"),t()()()(),e(15,"div",7)(16,"div",4)(17,"label"),i(18," COUNTRY "),t()(),e(19,"div",0)(20,"select",8),T(21,J,2,2,"option",9),t()()(),e(22,"div",10)(23,"div",4)(24,"label"),i(25," CURRENCY DISPLAY"),t()(),e(26,"div",0),m(27,"input",11),t()()()(),e(28,"div",2)(29,"div",0)(30,"div",12)(31,"div",4)(32,"label"),i(33," RATE "),t()(),e(34,"div",0),m(35,"input",13),t()(),e(36,"div",14)(37,"div",15)(38,"label"),i(39," AMNT "),t()(),e(40,"div",0),m(41,"input",16),t()(),e(42,"div",17)(43,"div",4)(44,"label"),i(45," TTL "),t()(),e(46,"div",0),m(47,"input",18),t()()()()(),e(48,"div",0)(49,"div",19)(50,"button",20),i(51," AGREED & NEXT "),t()()()()()),a&2&&(s(),c("formGroup",r.transactionForm),s(10),c("value",r.TransactionType.Buy),s(2),c("value",r.TransactionType.Sell),s(8),c("ngForOf",r.currencyList))},dependencies:[b,O,v,I,V,Y,M,B,w,P,G,A,k],styles:[".step3[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:#000}"]})};var C=class o{constructor(n,a){this.staticDataService=n;this.rateService=a}CurrencyList=[];CashExchangeRates=[];ngOnInit(){this.loadCurrencyList(),this.loadCurrencyRates()}loadCurrencyList(){this.staticDataService.getPublicStaticDataRequest().subscribe({next:n=>{this.CurrencyList=n.data.currencyList},error:n=>{console.log(n)}})}loadCurrencyRates(){this.rateService.getExchangeRates().subscribe({next:n=>{this.CashExchangeRates=n.data.cashExchangeRates},error:n=>{console.log(n)}})}onExchangeFormSubmit(n){console.log(n)}static \u0275fac=function(a){return new(a||o)(y(U),y(L))};static \u0275cmp=g({type:o,selectors:[["app-booking-panel"]],decls:37,vars:2,consts:[[1,"container"],[1,"transaction-pmt"],["id","pills-tab","role","tablist",1,"nav","nav-pills"],["role","presentation",1,"nav-item"],["id","pills-one-tab","data-bs-toggle","pill","data-bs-target","#tabOne","type","button","role","tab","aria-controls","pills-home","aria-selected","true",1,"nav-link","active"],["id","pills-two-tab","data-bs-toggle","pill","data-bs-target","#tabTwo","type","button","role","tab","aria-controls","pills-profile","aria-selected","false",1,"nav-link"],["id","pills-three-tab","data-bs-toggle","pill","data-bs-target","#tabThree","type","button","role","tab","aria-controls","pills-contact","aria-selected","false",1,"nav-link"],["id","pills-four-tab","data-bs-toggle","pill","data-bs-target","#tabFour","type","button","role","tab","aria-controls","pills-profile","aria-selected","false",1,"nav-link"],["id","pills-five-tab","data-bs-toggle","pill","data-bs-target","#tabFive","type","button","role","tab","aria-controls","pills-contact","aria-selected","false",1,"nav-link"],["id","pills-six-tab","data-bs-toggle","pill","data-bs-target","#tabSix","type","button","role","tab","aria-controls","pills-contact","aria-selected","false",1,"nav-link"],["id","pills-tabContent",1,"tab-content"],["id","tabOne","role","tabpanel","aria-labelledby","pills-home-tab","tabindex","0",1,"tab-pane","fade","show","active"],[3,"exchangeData","ExchangeRates","CurrencyList"],["id","tabTwo","role","tabpanel","aria-labelledby","pills-profile-tab","tabindex","0",1,"tab-pane","fade"],["id","tabThree","role","tabpanel","aria-labelledby","pills-contact-tab","tabindex","0",1,"tab-pane","fade"],["id","tabFour","role","tabpanel","aria-labelledby","pills-contact-tab","tabindex","0",1,"tab-pane","fade"],["id","tabFive","role","tabpanel","aria-labelledby","pills-contact-tab","tabindex","0",1,"tab-pane","fade"],["id","tabSix","role","tabpanel","aria-labelledby","pills-contact-tab","tabindex","0",1,"tab-pane","fade"]],template:function(a,r){a&1&&(m(0,"app-client-header"),e(1,"main")(2,"div",0)(3,"div",1)(4,"ul",2)(5,"li",3)(6,"button",4),i(7,"Calculate Amnts \u2776 "),t()(),e(8,"li",3)(9,"button",5),i(10,"Categorization \u2777 "),t()(),e(11,"li",3)(12,"button",6),i(13,"Simplified KYC \u2778 "),t()(),e(14,"li",3)(15,"button",7),i(16,"INVOICE \u2779 "),t()(),e(17,"li",3)(18,"button",8),i(19,"PAYMENTS \u277A "),t()(),e(20,"li",3)(21,"button",9),i(22,"COLLECTION \u277B "),t()()(),e(23,"div",10)(24,"div",11)(25,"app-exchange-panel",12),f("exchangeData",function(u){return r.onExchangeFormSubmit(u)}),t()(),e(26,"div",13),i(27," Tab content 02 "),t(),e(28,"div",14),i(29," Tab content 03 "),t(),e(30,"div",15),i(31," Tab content 04 "),t(),e(32,"div",16),i(33," Tab content 05 "),t(),e(34,"div",17),i(35," Tab content 06 "),t()()()()(),m(36,"app-disclaimer-footer")),a&2&&(s(25),c("ExchangeRates",r.CashExchangeRates)("CurrencyList",r.CurrencyList))},dependencies:[q,h,b,v,j],encapsulation:2})};var Z=[{path:"booking",component:C}],K=class o{static \u0275fac=function(a){return new(a||o)};static \u0275mod=R({type:o});static \u0275inj=E({imports:[b,D.forChild(Z)]})};export{K as ExchangeRoutingModule};
